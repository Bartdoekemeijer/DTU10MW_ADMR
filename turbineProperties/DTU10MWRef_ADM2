/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  1.6                                   |
|   \\  /    A nd           | Web:      http://www.OpenFOAM.org               |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      turbineProperties;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
// Most info from: http://orbit.dtu.dk/files/55645274/The_DTU_10MW_Reference_Turbine_Christian_Bak.pdf
// and from FAST files provided by DTU InnWind/CENER

NumBl                   3; 		// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
TipRad                  89.2; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
HubRad                  2.8; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
UndSling                0.0;  	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
OverHang               -7.1; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
TowerHt                115.63; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
Twr2Shft                2.75; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
ShftTilt               -5.0; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
PreCone               (-2.5 -2.5 -2.5);  // Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
GBRatio                50.0; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
GBEfficiency            1.0; 	// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
GenEfficiency           1.0;    // Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")

GenIner               1500.5;     // Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
HubIner               325.6709E3; // Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
BladeIner             45.64E6; // Output of ElastoDyn for OpenFAST simulation ("Second mass moment")

GenTorqueControllerType     "fiveRegion";
NacYawControllerType        "none";
BladePitchControllerType    "PID";
RatedRotSpeed         		9.6; // From paper/description
RotSpeedLimiter             false;
GenTorqueRateLimiter        true;
NacYawRateLimiter           true;
BladePitchRateLimiter       true;
SpeedFilterCornerFrequency  2.5; // From Delft Research Controller (Github)


GenTorqueControllerParams
{
    CutInGenSpeed           200.0;     // Suggested by S. Mulders from Delft Research Controller
    RatedGenSpeed           480.0;     // DTU 10MW: 50 x 9.6 RPM = 480.0 RPM (1173.7 for NREl 5MW: 97 x 12.1 RPM = 1173.7 RPM)
    Region2StartGenSpeed    300.0;     // DTU 10MW: 50 x 6.0 RPM = 300 RPM (670.0 For NREL 5MW: 97 (GB ratio) x 6.9 (cut-in rotor RPM) = 669.3 RPM)
    Region2EndGenSpeed      405.0;     // Suggested by S. Mulders from Delft Research Controller
    CutInGenTorque          0.0;       // From Delft Research Controller (Github)
    RatedGenTorque          198943.6;  // From Delft Research Controller (Github), For NREL 5MW: 43.09355E3
    RateLimitGenTorque      150000.0;  // From Delft Research Controller (Github), For NREL 5MW: 15.0E3
    KGen                    0.90;    // From Delft Research Controller (Github), For NREL 5MW: 2.55764E-2;
    GenTorqueControllerRelax   1.0;
}

NacYawControllerParams
{
    RateLimitNacYaw               2.0;
}


BladePitchControllerParams
{
    PitchK      25.0; // From Delft Research Controller (Github)
    PitchMin    0;    // Suggested by S. Mulders from Delft Research Controller
    PitchMax    90.0; // Suggested by S. Mulders from Delft Research Controller
    PitchControlKP       0.0105; // Suggested by S. Mulders from Delft Research Controller
    PitchControlKI       0.28; // Suggested by S. Mulders from Delft Research Controller
    PitchControlKD       0.0;    // Suggested by S. Mulders from Delft Research Controller
    RateLimitBladePitch  10.0;   // From Delft Research Controller (Github)
}



// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
Airfoils
(
	"Cylinder_originalDTU.dat"
	"FFA_W3_997_interp.dat"
	"FFA_W3_953_interp.dat"
	"FFA_W3_861_interp.dat"
	"FFA_W3_739_interp.dat"
	"FFA_W3_611_interp.dat"
	"FFA_W3_504_interp.dat"
	"FFA_W3_430_interp.dat"
	"FFA_W3_383_interp.dat"
	"FFA_W3_349_interp.dat"
	"FFA_W3_324_interp.dat"
	"FFA_W3_305_interp.dat"
	"FFA_W3_291_interp.dat"
	"FFA_W3_278_interp.dat"
	"FFA_W3_268_interp.dat"
	"FFA_W3_260_interp.dat"
	"FFA_W3_248_interp_NoFlap.dat"
	"FAA_W3_241_originalDTU.dat"
);


// Copied from the OpenFAST model ("DTU_10MW_ElastoDyn.dat")
BladeData
(
	//	radius(m)	c(m)	twist(deg)	airfoil	
	(	0.0000000	5.3800000	14.5000000	0	)
	(	2.6430176	5.3802898	14.5000000	1	)
	(	5.3797698	5.3799605	14.5000000	2	)
	(	8.2027383	5.4524800	14.4320088	3	)
	(	11.103143	5.6354406	13.8888157	4	)
	(	14.071021	5.8660043	12.5459743	5	)
	(	17.0953357	6.0706543	10.6086877	6	)
	(	20.1641225	6.1845112	8.89245230	7	)
	(	23.2646653	6.2030088	7.80180230	8	)
	(	26.3836994	6.1428800	7.02416240	9	)
	(	29.5076383	6.0199624	6.38219780	10	)
	(	32.6227943	5.8490685	5.77685700	11	)
	(	35.7156384	5.6453233	5.22750220	12	)
	(	38.7730197	5.4218912	4.67357580	13	)
	(	41.7823887	5.1858294	4.08859640	14	)
	(	44.7319957	4.9428274	3.48775510	15	)
	(	47.6110617	4.6982195	2.88655240	16	)
	(	50.4099164	4.4567750	2.29907920	16	)
	(	53.1201011	4.2226912	1.73617490	17	)
	(	55.7344352	3.9986797	1.20718980	17	)
	(	58.2470477	3.7860806	0.71870350	17	)
	(	60.6533643	3.5857065	0.27307630	17	)
	(	62.9500952	3.3980945	-0.1303796	17	)
	(	65.1351584	3.2234897	-0.4932788	17	)
	(	67.2075977	3.0618997	-0.8195652	17	)
	(	69.1674921	2.9130401	-1.1139248	17	)
	(	71.0158535	2.7762792	-1.3827044	17	)
	(	72.7545098	2.6506950	-1.6310908	17	)
	(	74.3859743	2.5359473	-1.8619588	17	)
	(	75.9133469	2.4307714	-2.0776268	17	)
	(	77.3402166	2.3314318	-2.2800794	17	)
	(	78.6705231	2.2324158	-2.4689967	17	)
	(	79.9084849	2.1290689	-2.6440841	17	)
	(	81.0585215	2.0190956	-2.8029648	17	)
	(	82.1251565	1.9033225	-2.9450707	17	)
	(	83.1129575	1.7761077	-3.0700851	17	)
	(	84.0264859	1.6260119	-3.1773290	17	)
	(	84.8702529	1.4401192	-3.2709560	17	)
	(	85.6486629	1.1835990	-3.3575265	17	)
	(	86.3660000	0.6000000	-3.4280000	17	)
);
